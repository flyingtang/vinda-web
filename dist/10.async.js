(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{WwiX:function(e,t,a){"use strict";(function(e){var i=a("Dthn"),l=a("FfR7");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("0akj");var s=l(a("9h/H")),n=l(a("NuQ2"));a("R5tz");var d=l(a("8qc5"));a("n+RV");var r=l(a("JsaA"));a("EKLF");var o=l(a("zUbA"));a("0Rxj");var h=l(a("nD3m"));a("HWQN");var c=l(a("wBux"));a("kidk");var u=l(a("PPIW"));a("PnKX");var f=l(a("z6iY")),m=l(a("rdAL")),p=l(a("uo9F")),g=l(a("pTVc")),v=i(a("xbqo")),b=f.default.TextArea,w=u.default.Group,E=c.default.Item;class S extends m.default.Component{constructor(t){super(t),this.columns=[{title:"\u6807\u9898",dataIndex:"title",width:300},{title:"\u63cf\u8ff0",dataIndex:"description",width:400},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createdAt",width:200,render:e=>(0,p.default)(e).format("YYYY-MM-DD HH:mm:ss")},{title:"\u66f4\u65b0\u65f6\u95f4",dataIndex:"updatedAt",width:200,render:e=>(0,p.default)(e).format("YYYY-MM-DD HH:mm:ss")},{title:"\u542f\u7981",dataIndex:"status",width:100,render:e=>1==e?"\u542f\u7528":"\u7981\u7528"},{title:"\u64cd\u4f5c",key:"operation",width:200,render:(e,t)=>{return m.default.createElement("span",null,m.default.createElement("a",{onClick:this.edit.bind(this,t)},"\u7f16\u8f91"),m.default.createElement(h.default,{type:"vertical"}),m.default.createElement("a",{onClick:this.delete.bind(this,e)},"\u5220\u9664"),m.default.createElement(h.default,{type:"vertical"}),m.default.createElement("a",{onClick:this.open.bind(this,e)},"\u6253\u5f00"))}}],this.open=(t=>{console.log(e,Object({NODE_ENV:"production"}),"001010")}),this.fetch=(e=>{this.setState({loading:!0}),v.find(e).then(e=>{if(e&&e.data){var t=e.data,a=void 0===t?[]:t,i=e.total;this.setState({videos:a,total:i,pageSize:e.pageSize})}}).finally(e=>{this.setState({loading:!1})})}),this.edit=(e=>{this.setState({selectRecord:e,fileList:[{url:e.originName,name:e.originName,uid:e.id}]},()=>{this.setState({visible:!0})})}),this.delete=(e=>{this.setState({loading:!0}),v.deleteOne(e.id).then(e=>{this.fetch({page:1}),this.setState({loading:!1}),o.default.success(e&&e["message"])})}),this.create=(()=>{this.setState({visible:!0})}),this.deleteRows=(()=>{console.log(this.state.selectedRowKeys,"12121");var e=this.state.selectedRowKeys;if(0==e.length)return o.default.error("\u65e0\u884c\u9009\u62e9");this.setState({loading:!0}),v.deleteAll(e).then(e=>{this.fetch({page:1}),this.setState({selectedRowKeys:[],loading:!1}),o.default.success(e&&e["message"])})}),this.onSelectChange=(e=>{this.setState({selectedRowKeys:e})}),this.handleOk=(e=>{var t=this.props.form;t.validateFields((a,i)=>{if(!a){console.log(i,"values");var l=this.state.fileList[0]&&(this.state.fileList[0].response&&this.state.fileList[0].response.urlName||this.state.fileList[0].urlName),s=this.state.fileList[0]&&this.state.fileList[0].response&&this.state.fileList[0].response.originName;i.urlName=l,i.originName=s,i.urlName||(i.urlName=this.state.selectRecord&&this.state.selectRecord.urlName),i.originName||(i.originName=this.state.selectRecord&&this.state.selectRecord.originName),e?v.update(e,i).then(e=>{this.fetch({page:1}),t.resetFields(),this.setState({visible:!1,selectRecord:{},fileList:[]})}):v.create(i).then(e=>{this.fetch({page:1}),t.resetFields(),this.setState({visible:!1,selectRecord:{},fileList:[]})})}})}),this.handleSubmit=(()=>{console.log(234)}),this.handleCancel=(e=>{this.setState({visible:!1})}),this.handleChange=(e=>{var t=e.fileList;console.log(t,"fileListfileList"),this.setState({fileList:t})}),this.handleRemove=(e=>{console.log(e,"\u79fb\u9664\u6587\u5316\u5bb6")}),this.changeHandle=((e,t,a)=>{var i=e.current;e.pageSize,e.total;i||(i=1),this.fetch({page:i})}),this.state={selectedRowKeys:[],loading:!1,videos:[],total:0,visible:!1,selectRecord:{},fileList:[],actionUrl:"/api/v1/video/upload",pageSize:0}}componentDidMount(){this.fetch({page:1})}render(){var e=this.state,t=e.loading,a=e.selectedRowKeys,i=e.videos,l=e.total,o=e.selectRecord,h=void 0===o?{}:o,p=e.actionUrl,v=e.pageSize,S={selectedRowKeys:a,onChange:this.onSelectChange},R=this.props.form.getFieldDecorator,y={labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}}},L=a.length>0;return m.default.createElement("div",null,m.default.createElement("div",{style:{marginBottom:16,textAlign:"right"}},m.default.createElement(r.default,{type:"danger",onClick:this.deleteRows,disabled:!L},"\u5220\u9664"),m.default.createElement(r.default,{type:"primary",onClick:this.create},"\u521b\u5efa")),m.default.createElement(d.default,{onChange:this.changeHandle.bind(this),rowKey:e=>e.id,loading:t,rowSelection:S,columns:this.columns,pagination:{total:l,pageSize:v},dataSource:i}),m.default.createElement(s.default,{title:h.id?"\u7f16\u8f91":"\u521b\u5efa",visible:this.state.visible,onOk:this.handleOk.bind(this,h.id),onCancel:this.handleCancel},m.default.createElement(c.default,null,m.default.createElement(E,(0,n.default)({},y,{label:"\u6807\u9898"}),R("title",{rules:[{required:!0,message:"Please input your title"}],initialValue:h&&h.title})(m.default.createElement(f.default,null))),m.default.createElement(E,(0,n.default)({},y,{label:"\u63cf\u8ff0"}),R("description",{initialValue:h&&h.description})(m.default.createElement(b,{rows:4}))),m.default.createElement(E,(0,n.default)({label:"\u542f\u7981"},y),R("status",{initialValue:h&&h.status||1})(m.default.createElement(w,null,m.default.createElement(u.default,{value:1},"\u542f\u7528"),m.default.createElement(u.default,{value:0},"\u7981\u7528")))),m.default.createElement(E,(0,n.default)({label:"\u4e0a\u4f20"},y),R("urlName",{initialValue:h&&h.urlName})(m.default.createElement(g.default,{handleRemove:this.handleRemove.bind(this),actionUrl:p,fileList:this.state.fileList,listType:"text",handleChange:this.handleChange}))))))}}var R=c.default.create()(S);t.default=R}).call(this,a("b8vf"))}}]);