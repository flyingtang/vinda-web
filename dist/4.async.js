(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{XX1F:function(e,t,a){"use strict";var d=a("284h"),s=a("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("g9YV");var i=s(a("wCAj"));a("+L6B");var l=s(a("2/Rp"));a("miYZ");var n=s(a("tsqr"));a("/zsF");var r=s(a("PArb")),o=s(a("q1tI")),h=s(a("usdK")),c=s(a("wd/R")),u=d(a("DK1N"));a("L342");class f extends o.default.Component{constructor(e){super(e),this.columns=[{title:"\u6807\u9898",dataIndex:"title",width:300},{title:"\u4f5c\u8005",dataIndex:"author",width:100},{title:"\u6d4f\u89c8\u6570",dataIndex:"visit_count",width:100,render:()=>0},{title:"\u521b\u5efa\u65f6\u95f4",dataIndex:"createdAt",width:200,render:e=>(0,c.default)(e).format("YYYY-MM-DD HH:mm:ss")},{title:"\u66f4\u65b0\u65f6\u95f4",dataIndex:"updatedAt",width:200,render:e=>(0,c.default)(e).format("YYYY-MM-DD HH:mm:ss")},{title:"\u72b6\u6001",dataIndex:"status",width:100,render:e=>{switch(e){case 1:return"\u6b63\u5e38";default:return"\u4e0d\u6b63\u5e38"}}},{title:"\u64cd\u4f5c",key:"operation",width:200,render:(e,t)=>{return o.default.createElement("span",null,o.default.createElement("a",{onClick:this.edit.bind(this,t)},"\u7f16\u8f91"),o.default.createElement(r.default,{type:"vertical"}),o.default.createElement("a",{onClick:this.delete.bind(this,e)},"\u5220\u9664"))}}],this.changeHandle=((e,t,a)=>{var d=e.current;e.pageSize,e.total;d||(d=1),this.fetch({page:d})}),this.edit=(e=>{if(e&&e.id){var t=`/admin/articles/${e.id}`;h.default.push(t)}else n.default.error("\u64cd\u4f5c\u65e0\u6548")}),this.delete=(e=>{this.setState({loading:!0}),u.deleteOne(e.id).then(e=>{this.fetch(),this.setState({loading:!1}),n.default.success(e&&e["message"])})}),this.deleteRows=(()=>{var e=this.state.selectedRowKeys;if(0==e.length)return n.default.error("\u65e0\u884c\u9009\u62e9");this.setState({loading:!0}),u.deleteAll(e).then(e=>{this.fetch(),this.setState({selectedRowKeys:[],loading:!1}),n.default.success(e&&e["message"])})}),this.create=(()=>{h.default.push("/admin/articles/new")}),this.start=(()=>{this.setState({loading:!0}),setTimeout(()=>{this.setState({selectedRowKeys:[],loading:!1})},1e3)}),this.onSelectChange=(e=>{this.setState({selectedRowKeys:e})}),this.state={selectedRowKeys:[],loading:!1,data:[],total:0}}componentDidMount(){this.fetch()}fetch(e){this.setState({loading:!0}),u.find(e).then(e=>{e&&e.data&&this.setState({data:e.data,total:e.total})}).finally(()=>{this.setState({loading:!1})})}render(){var e=this.state,t=e.loading,a=e.selectedRowKeys,d=e.data,s=e.total,n={selectedRowKeys:a,onChange:this.onSelectChange},r=a.length>0;return o.default.createElement("div",null,o.default.createElement("div",{style:{marginBottom:16,textAlign:"right"}},o.default.createElement(l.default,{type:"danger",onClick:this.deleteRows,disabled:!r,loading:t},"\u5220\u9664"),o.default.createElement(l.default,{type:"primary",onClick:this.create,loading:t},"\u521b\u5efa")),o.default.createElement(i.default,{rowKey:e=>e.id,onChange:this.changeHandle.bind(this),loading:t,pagination:{total:s},rowSelection:n,columns:this.columns,dataSource:d}))}}var g=f;t.default=g}}]);